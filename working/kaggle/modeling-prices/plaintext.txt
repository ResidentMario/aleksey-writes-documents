What can we learn about AirBnB rentals if we try to model their price? In this notebook we fit a simple linear regression classifier to AirBnB prices for rentals in the Boston market, keeping in mind predictor variables we determined were important in the Exploring Prices notebook. Keep in mind here that our purpose isn't to write a super-accurate classifier of rental prices. We're interested instead in running a simple model that can hopefully give us more insight into what variables matter when it comes to AirBnB rentals, and which ones don't. Linear classification is ideal for this. Before we class run our classifier we have to featurize our dataset into something our classifier will understand. To start with, let's fix up two variables with wonky formatting: price, saved with dollar signs and commas, and amenities, saved as an even wonkier stringification of a set. Let's start off our feature matrix with numerical variables which we can use immediately. Next, let's turn the presence or absence of the various amenities our AirBnB homes offer into features. We'll encode presence or absence using True and False (which our classifier later on will interpret as 0s and 1s, as these are indeed considered to be equal within Python). To do that we'll map across our amenities lists, assign booleans, concatenate all of the boolean lists into an array, assign that to a proper DataFrame, then concatenate that DataFrame to our existing features matrix. Whoo, that's a mouthful. A number of these features are already boolean features, except that they are saved as strings of the form "t" or "f". We need to fix those too if we want to use them, by mapping them to True and False. We also have a number of categorical fields, e.g. bed_type which may be any of {real_bed, futon, sofa, [...]}. We'll encode these into dummy variables too, using the built-in pandas get_dummies convenience function. Seems we have everything. Do any of our columns have empty values? Our classifier will not like us if we hand it empty values, so we have to fill these in somehow. The median of the columns is a pretty good way of doing it. One more thing. Regression can be get thrown off very easily by extreme values, and this dataset has a few really big ones. Exploring our dataset earlier (in Exploring Price) showed that though the extremely high-value rentals may sometimes be actual mansions or whatnot for rent, for the most part they're scalpers setting unrealistic valuations or just joke listings. These will throw off our model if we include them, by a lot. Exploring Price showed that a price ceiling of around 600 per day was reasonable, so let's use that here. Ok, now we're ready for a classifier. Let's use scikit LinearRegression (there are two dominant options here, this one and the statsmodel one, and we're going to go with scikit for no particular reason). Fit the model and generate predictions. To see how well our classifier did, let's look at some metrics. MSE is the square of the average error in each term, while root MSE is its absolute value. Our RMSE is 59 dollars, meaning that our classifier is wrong by that much on average. How significant is this with respect to the range of prices we are seeing? To see that let's plot RMSE as a boundary around the median price. That's...not great. A look at our R-squared, which tells us the percentage of the data's variance explained by the model, confirms that. Of course, we knew this ahead of time. Price is a difficult thing to classify given our limited variables and simplistic model worldview. Still, I had hoped for R^2 more along the lines of 75% or better... If we were interested in accuracy we'd definitely go back and try and improve our outcome, however for the purposes of figuring out what the important variables are we'll press on with what we have. Let's look at our coefficients: Some off-the-cuff observations: Right away we see a variable that doesn't matter at all: host_listings_count and host_total_listings_count (which are really almost one variable, it turns out!). Note that host_listing_count does have an impact, in the case of professional BnB companies, that effect however is more readily explained by a second-order variable that we will examine later on. According to our model, every additional bedroom you want to rent will set you back an additional 35 dollars, while each additional bathroom will cost 11 dollars extra. Considering that this is the core product, these are surprisingly low numbers! In other words, a disproportionate amount of price variation relative to our expectations is explained by factors other than the number of rooms available. Here's a logical rationalization: renters going through AirBnB by and large are people looking for a relatively cheap short-term place to stay, and place less emphasis on the number of rooms available where they are staying than the convenience of and amenities available there. This opinion contrasts with the way that hotel pricing generally works. Hotels charge multiplier premiums for additional rooms! Let's look at the effect that neighborhood has on price. We see that neighborhood does indeed, unsurprisingly, have a strong effect on the price of a listing. Far-from-the-city-center, demographically "sketchy" neighborhoods cost 40 dollars or less than average to rent in, which as a lifelong commuter honestly sounds like kind of a good deal to me (hey, it's still Boston). Again, 40 dollars a night over the average seems like the premium you pay to be "right there" location-wise. And South Boston, a once working-class neighborhood now long and deep on gentrification, is the average-most of the nabes. Overall the range in the price premiums per choice of neighborhood can almost make up the average price alone! Put another way, every night in the Bay Village is almost two nights in Roslindale, on average. Next, let's look at amenities. Amenities are an interesting case. On a face level, more amenities is always better: every additional amenity available at a location will theoretically be a big plus for people who actually want it and a not-negative for those who don't (you can choose, after all, whether or not they make use of it). Hence on an individual level there's an incentive for a host to list irons, hot tubs, kitchens, the works. On the level of AirBnBs at large, however, what a host chooses to list as an amenity is a signal about the "class" of the listing. The most obvious example of this to me is hangers. I do not doubt for a second that every (well, almost every) BnB on the market gives its visitors access to hangers, but it's available to list as an amenity all the same. Even when you don't list hangers, then, it's just assumed that you have them; hosts who choose to list them as a "feature" anyway bring up the shade of not having such a rather basic necessity, which actually signals a lower price. So the effect of amenities in our model should be interpreted not as a fungible good but as a social signal. From that perspective, a price penalty for including a kitchen, hangers, or Internet access makes sense, with the magnitude of the effect corresponding with the strength of what that signals about the "class" of the rental. With that out of the way, here's my observations: Having a pool is seemingly also penalized, which seems strange. But remember that pools are exceedingly rare inside of city limits; correspondingly having a pool signals that the unit in question is somewhere suburban far from the city center, a fact which seemingly overwhelms the positive benefit of having a pool at all. Note that this effect is also partially/mostly explained by neighborhood! Free Parking on Premises nets a minor penalty for the same reason. There's one more effect I want to drill into. Interestingly enough, requiring guests to have a profile picture reduces price by almost 40 dollars a night, while requiring verification by phone increases it by more than 55 dollars. Those are big numbers; where are they coming from? Let's look at the average characteristics to find out. Whoa! That host_listings_count is wild! What's going on here? Ah. It looks like requiring guest phone verification, a logistical nightmare and rarely used option for most sharing economy listers, is a professional requirement for listers somehow managing large amounts of residences. By the way, you may have heard on the news that AirBnB is in legal court battles with many cities, the city of New York most prominently, over regulations targeting people renting out non-primary residences. What you are seeing here are these firms directly: companies professionally managing 558-home portfolios. This variable just happens to be a proxy for such firms, discovering that they tend to charge a significant premium. Even though our model's predictive accuracy is poor, it nevertheless points to a large number of interesting facts about the Boston AirBnB market (and, by analogy, to AirBnB markets worldwide). I wouldn't treat the observations above as verbatim, but rather as interesting directions for further exploration if you are so inclined! (Did I mention that AirBnB has one of the best data teams for a company is size?) 